! -----------------------------------------------------------------------------
! ElmerFEM Circuit Generated: February 15, 2024
! -----------------------------------------------------------------------------

! -----------------------------------------------------------------------------
! Number of Circuits in Model
! -----------------------------------------------------------------------------
$ Circuits = 3

! -----------------------------------------------------------------------------
! Parameters
! -----------------------------------------------------------------------------

! General Parameters 
$ I_0 = Is / 35
$ I_1 = Is / 35
$ I_2 = Is / 35

! Parameters in Component 1: Phase_0_0
$ N_Phase_0_0 = 35	 ! Number of Turns
$ R_Phase_0_0 = 0.022857142857142857	 ! Coil Resistance
$ Ns_Phase_0_0 = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)
! Parameters in Component 2: Phase_0_1
$ N_Phase_0_1 = 35	 ! Number of Turns
$ R_Phase_0_1 = 0.022857142857142857	 ! Coil Resistance
$ Ns_Phase_0_1 = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)

! -----------------------------------------------------------------------------
! Matrix Size Declaration and Matrix Initialization
! -----------------------------------------------------------------------------
$ C.1.variables = 8
$ C.1.perm = zeros(C.1.variables)
$ C.1.A = zeros(C.1.variables,C.1.variables)
$ C.1.B = zeros(C.1.variables,C.1.variables)

! -----------------------------------------------------------------------------
! Dof/Unknown Vector Definition
! -----------------------------------------------------------------------------
$ C.1.name.1 = "i_I_0"
$ C.1.name.2 = "i_component(1)"
$ C.1.name.3 = "i_component(2)"
$ C.1.name.4 = "v_I_0"
$ C.1.name.5 = "v_component(1)"
$ C.1.name.6 = "v_component(2)"
$ C.1.name.7 = "u_2_circuit_1"
$ C.1.name.8 = "u_3_circuit_1"

! -----------------------------------------------------------------------------
! Source Vector Definition
! -----------------------------------------------------------------------------
$ C.1.source.8 = "I_0_Source"

! -----------------------------------------------------------------------------
! KCL Equations
! -----------------------------------------------------------------------------
$ C.1.B(0,0) = -1
$ C.1.B(0,1) = 1
$ C.1.B(1,1) = -1
$ C.1.B(1,2) = 1

! -----------------------------------------------------------------------------
! KVL Equations
! -----------------------------------------------------------------------------
$ C.1.B(2,3) = 1
$ C.1.B(2,6) = -1
$ C.1.B(3,4) = -1
$ C.1.B(3,6) = 1
$ C.1.B(3,7) = -1

! -----------------------------------------------------------------------------
! Component Equations
! -----------------------------------------------------------------------------
$ C.1.B(6,5) = -1
$ C.1.B(6,7) = 1
$ C.1.B(7,0) = 1


! -----------------------------------------------------------------------------
! Additions in SIF file
! -----------------------------------------------------------------------------
Component 1
  Name = "Phase_0_0"
  Master Bodies(1) = 2
  Coil Type = "Stranded"
  Number of Turns = Real $ N_Phase_0_0
  Resistance = Real $ R_Phase_0_0
  Symmetry Coefficient = Real $ 1/(Ns_Phase_0_0)
End 

Component 2
  Name = "Phase_0_1"
  Master Bodies(1) = 3
  Coil Type = "Stranded"
  Number of Turns = Real $ N_Phase_0_1
  Resistance = Real $ R_Phase_0_1
  Symmetry Coefficient = Real $ 1/(Ns_Phase_0_1)
End 

! -----------------------------------------------------------------------------
! Parameters
! -----------------------------------------------------------------------------

! Parameters in Component 3: Phase_1_0
$ N_Phase_1_0 = 35	 ! Number of Turns
$ R_Phase_1_0 = 0.022857142857142857	 ! Coil Resistance
$ Ns_Phase_1_0 = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)
! Parameters in Component 4: Phase_1_1
$ N_Phase_1_1 = 35	 ! Number of Turns
$ R_Phase_1_1 = 0.022857142857142857	 ! Coil Resistance
$ Ns_Phase_1_1 = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)

! -----------------------------------------------------------------------------
! Matrix Size Declaration and Matrix Initialization
! -----------------------------------------------------------------------------
$ C.2.variables = 8
$ C.2.perm = zeros(C.2.variables)
$ C.2.A = zeros(C.2.variables,C.2.variables)
$ C.2.B = zeros(C.2.variables,C.2.variables)

! -----------------------------------------------------------------------------
! Dof/Unknown Vector Definition
! -----------------------------------------------------------------------------
$ C.2.name.1 = "i_I_1"
$ C.2.name.2 = "i_component(3)"
$ C.2.name.3 = "i_component(4)"
$ C.2.name.4 = "v_I_1"
$ C.2.name.5 = "v_component(3)"
$ C.2.name.6 = "v_component(4)"
$ C.2.name.7 = "u_2_circuit_2"
$ C.2.name.8 = "u_3_circuit_2"

! -----------------------------------------------------------------------------
! Source Vector Definition
! -----------------------------------------------------------------------------
$ C.2.source.8 = "I_1_Source"

! -----------------------------------------------------------------------------
! KCL Equations
! -----------------------------------------------------------------------------
$ C.2.B(0,0) = -1
$ C.2.B(0,1) = 1
$ C.2.B(1,1) = -1
$ C.2.B(1,2) = 1

! -----------------------------------------------------------------------------
! KVL Equations
! -----------------------------------------------------------------------------
$ C.2.B(2,3) = 1
$ C.2.B(2,6) = -1
$ C.2.B(3,4) = -1
$ C.2.B(3,6) = 1
$ C.2.B(3,7) = -1

! -----------------------------------------------------------------------------
! Component Equations
! -----------------------------------------------------------------------------
$ C.2.B(6,5) = -1
$ C.2.B(6,7) = 1
$ C.2.B(7,0) = 1


! -----------------------------------------------------------------------------
! Additions in SIF file
! -----------------------------------------------------------------------------
Component 3
  Name = "Phase_1_0"
  Master Bodies(1) = 6
  Coil Type = "Stranded"
  Number of Turns = Real $ N_Phase_1_0
  Resistance = Real $ R_Phase_1_0
  Symmetry Coefficient = Real $ 1/(Ns_Phase_1_0)
End 

Component 4
  Name = "Phase_1_1"
  Master Bodies(1) = 7
  Coil Type = "Stranded"
  Number of Turns = Real $ N_Phase_1_1
  Resistance = Real $ R_Phase_1_1
  Symmetry Coefficient = Real $ 1/(Ns_Phase_1_1)
End 

! -----------------------------------------------------------------------------
! Parameters
! -----------------------------------------------------------------------------

! Parameters in Component 5: Phase_2_0
$ N_Phase_2_0 = 35	 ! Number of Turns
$ R_Phase_2_0 = 0.022857142857142857	 ! Coil Resistance
$ Ns_Phase_2_0 = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)
! Parameters in Component 6: Phase_2_1
$ N_Phase_2_1 = 35	 ! Number of Turns
$ R_Phase_2_1 = 0.022857142857142857	 ! Coil Resistance
$ Ns_Phase_2_1 = 1	 ! Sector/Symmetry Coefficient (e.g. 4 is 1/4 of the domain)

! -----------------------------------------------------------------------------
! Matrix Size Declaration and Matrix Initialization
! -----------------------------------------------------------------------------
$ C.3.variables = 8
$ C.3.perm = zeros(C.3.variables)
$ C.3.A = zeros(C.3.variables,C.3.variables)
$ C.3.B = zeros(C.3.variables,C.3.variables)

! -----------------------------------------------------------------------------
! Dof/Unknown Vector Definition
! -----------------------------------------------------------------------------
$ C.3.name.1 = "i_I_2"
$ C.3.name.2 = "i_component(5)"
$ C.3.name.3 = "i_component(6)"
$ C.3.name.4 = "v_I_2"
$ C.3.name.5 = "v_component(5)"
$ C.3.name.6 = "v_component(6)"
$ C.3.name.7 = "u_2_circuit_3"
$ C.3.name.8 = "u_3_circuit_3"

! -----------------------------------------------------------------------------
! Source Vector Definition
! -----------------------------------------------------------------------------
$ C.3.source.8 = "I_2_Source"

! -----------------------------------------------------------------------------
! KCL Equations
! -----------------------------------------------------------------------------
$ C.3.B(0,0) = -1
$ C.3.B(0,1) = 1
$ C.3.B(1,1) = -1
$ C.3.B(1,2) = 1

! -----------------------------------------------------------------------------
! KVL Equations
! -----------------------------------------------------------------------------
$ C.3.B(2,3) = 1
$ C.3.B(2,6) = -1
$ C.3.B(3,4) = -1
$ C.3.B(3,6) = 1
$ C.3.B(3,7) = -1

! -----------------------------------------------------------------------------
! Component Equations
! -----------------------------------------------------------------------------
$ C.3.B(6,5) = -1
$ C.3.B(6,7) = 1
$ C.3.B(7,0) = 1


! -----------------------------------------------------------------------------
! Additions in SIF file
! -----------------------------------------------------------------------------
Component 5
  Name = "Phase_2_0"
  Master Bodies(1) = 4
  Coil Type = "Stranded"
  Number of Turns = Real $ N_Phase_2_0
  Resistance = Real $ R_Phase_2_0
  Symmetry Coefficient = Real $ 1/(Ns_Phase_2_0)
End 

Component 6
  Name = "Phase_2_1"
  Master Bodies(1) = 5
  Coil Type = "Stranded"
  Number of Turns = Real $ N_Phase_2_1
  Resistance = Real $ R_Phase_2_1
  Symmetry Coefficient = Real $ 1/(Ns_Phase_2_1)
End 

! -----------------------------------------------------------------------------
! Sources in SIF 
! -----------------------------------------------------------------------------

Body Force 1
  I_0_Source = Variable time, timestep size
     Real MATC "dir_ph0*I_0*sin((tx(0)-tx(1))*2*pi*f-0*2*pi/3)"
  I_1_Source = Variable time, timestep size
     Real MATC "dir_ph1*I_1*sin((tx(0)-tx(1))*2*pi*f-1*2*pi/3)" 
  I_2_Source = Variable time, timestep size
     Real MATC "dir_ph2*I_2*sin((tx(0)-tx(1))*2*pi*f-2*2*pi/3)" 
End
! -----------------------------------------------------------------------------
! End of Circuit
! -----------------------------------------------------------------------------
